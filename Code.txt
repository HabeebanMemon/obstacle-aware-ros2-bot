<?xml version="1.0"?>
<robot name="gazebo_robot">


<link name="base_link">
<visual>
<geometry>
<box size="0.4 0.4 0.1"/>
</geometry>
<material name="gray">
<color rgba="0.5 0.5 0.5 1"/>
</material>
</visual>
<collision>
<geometry>

 
<box size="0.4 0.4 0.1"/>
</geometry>
</collision>
<inertial>
<mass value="10.0"/>
<inertia ixx="0.1" ixy="0" ixz="0" iyy="0.1" iyz="0" izz="0.1"/>
</inertial>
</link>


<link name="link_1">
<visual>
<geometry>
<cylinder radius="0.05" length="0.3"/>
</geometry>
<origin xyz="0 0 0.15" rpy="0 0 0"/>
<material name="red">
<color rgba="1 0 0 1"/>
</material>
</visual>
<collision>
<geometry>
<cylinder radius="0.05" length="0.3"/>
</geometry>
<origin xyz="0 0 0.15" rpy="0 0 0"/>
</collision>
<inertial>

 
<mass value="1.0"/>
<inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
</inertial>
</link>


<joint name="joint_1" type="revolute">
<parent link="base_link"/>
<child link="link_1"/>
<origin xyz="0 0 0.05" rpy="0 0 0"/>
<axis xyz="0 0 1"/>
<limit lower="-3.14" upper="3.14" effort="50" velocity="1.0"/>
</joint>


<link name="camera_link">
<visual>
<geometry>
<box size="0.05 0.05 0.05"/>
</geometry>
<material name="blue">
<color rgba="0 0 1 1"/>
</material>
</visual>
<collision>
<geometry>
<box size="0.05 0.05 0.05"/>
</geometry>

 
</collision>
<inertial>
<mass value="0.1"/>
<inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0.001" izz="0.001"/>
</inertial>
</link>


<joint name="camera_joint" type="fixed">
<parent link="base_link"/>
<child link="camera_link"/>
<origin xyz="0.25 0 0.25" rpy="0 0 0"/>
</joint>


<!-- Sonar link -->
<link name="sonar_link">
<visual>
<geometry>
<box size="0.03 0.03 0.03"/>
</geometry>
<material name="yellow">
<color rgba="1 1 0 1"/>
</material>
</visual>
<collision>
<geometry>
<box size="0.03 0.03 0.03"/>

 
</geometry>
</collision>
<inertial>
<mass value="0.05"/>
<inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0001" iyz="0" izz="0.0001"/>
</inertial>
</link>


<joint name="sonar_joint" type="fixed">
<parent link="base_link"/>
<child link="sonar_link"/>
<origin xyz="0.25 0 0.15" rpy="0 0 0"/>
</joint>


<gazebo reference="base_link">
<material>Gazebo/Gray</material>
</gazebo>
<gazebo reference="link_1">
<material>Gazebo/Red</material>
</gazebo>
<gazebo reference="camera_link">
<material>Gazebo/Blue</material>
</gazebo>


<gazebo reference="camera_link">
<sensor type="camera" name="camera_sensor">

 
<update_rate>30.0</update_rate>
<camera name="head">
<horizontal_fov>1.3962634</horizontal_fov>
<image>
<width>800</width>
<height>800</height>
<format>R8G8B8</format>
</image>
<clip>
<near>0.02</near>
<far>300</far>
</clip>
</camera>
<plugin name="camera_controller" filename="libgazebo_ros_camera.so">
<alwaysOn>true</alwaysOn>
<updateRate>0.0</updateRate>
<cameraName>my_robot/camera1</cameraName>
<imageTopicName>image_raw</imageTopicName>
<cameraInfoTopicName>camera_info</cameraInfoTopicName>
<frameName>camera_link</frameName>
</plugin>
</sensor>
</gazebo>


<!-- Sonar sensor -->
<gazebo reference="sonar_link">

 
<sensor type="ray" name="sonar_sensor">
<always_on>true</always_on>
<update_rate>20.0</update_rate>
<visualize>true</visualize>


<ray>
<scan>
<horizontal>
<samples>1</samples>
<resolution>1</resolution>
<min_angle>0.0</min_angle>
<max_angle>0.0</max_angle>
</horizontal>
<vertical>
<samples>1</samples>
<resolution>1</resolution>
<min_angle>0.0</min_angle>
<max_angle>0.0</max_angle>
</vertical>
</scan>
<range>
<min>0.05</min>
<max>3.0</max>
<resolution>0.01</resolution>
</range>
</ray>

 


<plugin name="sonar_controller" filename="libgazebo_ros_ray_sensor.so">
<ros>
<namespace>/my_robot</namespace>
<remapping>~/out:=sonar</remapping>
</ros>
<frame_name>sonar_link</frame_name>
</plugin>
</sensor>
</gazebo>


<gazebo>
<plugin name="object_controller" filename="libgazebo_ros_planar_move.so">
<commandTopic>cmd_vel</commandTopic>
<odometryTopic>odom</odometryTopic>
<odometryFrame>odom</odometryFrame>
<odometryRate>20.0</odometryRate>
<robotBaseFrame>base_link</robotBaseFrame>
</plugin>
</gazebo>


</robot>


